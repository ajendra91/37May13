<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
  		<title>Hotel App</title>
  		<meta charset="utf-8"/>
  		<meta name="viewport" content="width=device-width, initial-scale=1"/>
  		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"/>
  		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" type="text/css" rel="stylesheet"/>
  		 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  		<link rel="stylesheet" href="styles/custom.css"/>
	</head>
	<body>
	<div id="showheader" th:replace="header"></div>
	<div class="container searchContainer">
			<div class="d-flex justify-content-center"> <img src="images/logo.png"/></div>
			
			    <div class="form-group has-search">
			    	<span class="fa fa-search form-control-feedback"></span>
			      <input type="text" class="form-control typeahead" id="searchTxt" name="searchTxt" placeholder="Search for a Hotel, Address, City, or Provinces" autofocus="true"/>
			      <input type="hidden" id="searchTxtHidden"/>
			      <BR/>
			     <div class="d-flex justify-content-center"> <button type="button" class="btn btn-danger searchBtn">Search Hotels</button></div>
			    </div>
   			 
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  	
  	
  	
<script>


function getCookie(cname) {
	    var name = cname + "=";
	    var ca = document.cookie.split(';');
	    for (var i = 0; i < ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) === ' ')
	            c = c.substring(1);
	        if (c.indexOf(name) === 0)
	            return c.substring(name.length, c.length);
	    }
	    return "";
	}
	

	var token = getCookie("access_token");
	
	if(token!=null && token!="") {
			$("#login").hide();
			$("#register").hide();
			$("#logout").show();
	} else {
		$("#login").show();
		$("#register").show();
		$("#logout").hide();
	}

	
	$("#hello").click(function() {
		alert("fff");
		 $.ajax({
		        type: "GET",
		        url: "/hello",
		        contentType: 'application/x-www-form-urlencoded',
		        beforeSend: function(request) {
		            request.setRequestHeader("Authorization", "Bearer "+ getCookie("access_token"));
		          },
		        success: function (result) {
		        	//alert(result);
		        	
		        	if(result!=null){
		        		document.location.href="hello";
		        	}
		        	
		        	},
		        error: function (data) {
		        	
		        }
		    });
		
	});

</script>
  	
	</body>
</html>